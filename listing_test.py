import requests


LISTING_URL = "https://www.zillow.com/search/GetSearchPageState.htm?searchQueryState=%7B%22pagination%22%3A%7B%7D%2C%22mapBounds%22%3A%7B%22north%22%3A36.81261568046124%2C%22east%22%3A-91.44158859375%2C%22south%22%3A25.48670686898427%2C%22west%22%3A-108.71209640625%7D%2C%22usersSearchTerm%22%3A%22TX%22%2C%22mapZoom%22%3A6%2C%22regionSelection%22%3A%5B%7B%22regionId%22%3A54%2C%22regionType%22%3A2%7D%5D%2C%22isMapVisible%22%3Atrue%2C%22category%22%3A%22cat2%22%2C%22filterState%22%3A%7B%22price%22%3A%7B%22min%22%3A200000%7D%2C%22isCondo%22%3A%7B%22value%22%3Afalse%7D%2C%22isForSaleForeclosure%22%3A%7B%22value%22%3Afalse%7D%2C%22isApartment%22%3A%7B%22value%22%3Afalse%7D%2C%22isMultiFamily%22%3A%7B%22value%22%3Afalse%7D%2C%22monthlyPayment%22%3A%7B%22min%22%3A1078%7D%2C%22isAllHomes%22%3A%7B%22value%22%3Atrue%7D%2C%22sortSelection%22%3A%7B%22value%22%3A%22pricea%22%7D%2C%22isAuction%22%3A%7B%22value%22%3Afalse%7D%2C%22isNewConstruction%22%3A%7B%22value%22%3Afalse%7D%2C%22isLotLand%22%3A%7B%22value%22%3Afalse%7D%2C%22isTownhouse%22%3A%7B%22value%22%3Afalse%7D%2C%22isManufactured%22%3A%7B%22value%22%3Afalse%7D%2C%22isComingSoon%22%3A%7B%22value%22%3Afalse%7D%2C%22isApartmentOrCondo%22%3A%7B%22value%22%3Afalse%7D%2C%22isForSaleByAgent%22%3A%7B%22value%22%3Afalse%7D%7D%2C%22isListVisible%22%3Atrue%7D&wants={%22cat2%22:[%22mapResults%22]}&requestId=2"

# GET /search/GetSearchPageState.htm?searchQueryState=%7B%22pagination%22%3A%7B%7D%2C%22mapBounds%22%3A%7B%22north%22%3A36.81261568046124%2C%22east%22%3A-91.44158859375%2C%22south%22%3A25.48670686898427%2C%22west%22%3A-108.71209640625%7D%2C%22usersSearchTerm%22%3A%22TX%22%2C%22mapZoom%22%3A6%2C%22regionSelection%22%3A%5B%7B%22regionId%22%3A54%2C%22regionType%22%3A2%7D%5D%2C%22isMapVisible%22%3Atrue%2C%22category%22%3A%22cat2%22%2C%22filterState%22%3A%7B%22price%22%3A%7B%22min%22%3A200000%7D%2C%22isCondo%22%3A%7B%22value%22%3Afalse%7D%2C%22isForSaleForeclosure%22%3A%7B%22value%22%3Afalse%7D%2C%22isApartment%22%3A%7B%22value%22%3Afalse%7D%2C%22isMultiFamily%22%3A%7B%22value%22%3Afalse%7D%2C%22monthlyPayment%22%3A%7B%22min%22%3A1078%7D%2C%22isAllHomes%22%3A%7B%22value%22%3Atrue%7D%2C%22sortSelection%22%3A%7B%22value%22%3A%22pricea%22%7D%2C%22isAuction%22%3A%7B%22value%22%3Afalse%7D%2C%22isNewConstruction%22%3A%7B%22value%22%3Afalse%7D%2C%22isLotLand%22%3A%7B%22value%22%3Afalse%7D%2C%22isTownhouse%22%3A%7B%22value%22%3Afalse%7D%2C%22isManufactured%22%3A%7B%22value%22%3Afalse%7D%2C%22isComingSoon%22%3A%7B%22value%22%3Afalse%7D%2C%22isApartmentOrCondo%22%3A%7B%22value%22%3Afalse%7D%2C%22isForSaleByAgent%22%3A%7B%22value%22%3Afalse%7D%7D%2C%22isListVisible%22%3Atrue%7D&wants={%22cat2%22:[%22mapResults%22]}&requestId=2 HTTP/2
# Host: www.zillow.com
headers = {"Cookie": 'x-amz-continuous-deployment-state=AYABeMFMZn964Cq1c+8Bn2T4mbAAPgACAAFEAB1kM2Jsa2Q0azB3azlvai5jbG91ZGZyb250Lm5ldAABRwAVRzA3MjU1NjcyMVRZRFY4RDcyVlpWAAEAAkNEABpDb29raWUAAACAAAAADKIJcyDo0vnN+s8%2FQwAw0cRCuacMlSMM2xHXR1Yimmf41TGt0LnGJn6HX92uhE3sBS36qwlTyLYDpenQp3YLAgAAAAAMAAQAAAAAAAAAAAAAAAAAAIRQrJb6n85ozdfKRPjmMg3%2F%2F%2F%2F%2FAAAAAQAAAAAAAAAAAAAAAQAAAAyt8LVxo5i5AF8LF0We3uYGd0+gXZ4UDUfw6M7s; JSESSIONID=6C07615BE4C618539DA81B00A698E15A; zguid=24|%244cf08c0c-8a55-4308-9ac2-a57d58fde8ac; zgsession=1|2ead6964-7360-4195-9ab3-34701e94dd99; _ga=GA1.2.1628308424.1694148875; _gid=GA1.2.1506497957.1694148875; zjs_anonymous_id=%224cf08c0c-8a55-4308-9ac2-a57d58fde8ac%22; zjs_user_id=null; zg_anonymous_id=%2214db3169-c5e1-4203-97e5-f68eff9d6c8a%22; x-amz-continuous-deployment-state=AYABeJOdkVTfInkWf8xqhX%2Fm1eIAPgACAAFEAB1kM2Jsa2Q0azB3azlvai5jbG91ZGZyb250Lm5ldAABRwAVRzA3MjU1NjcyMVRZRFY4RDcyVlpWAAEAAkNEABpDb29raWUAAACAAAAADHvx4WCDQyYXA%2FuFJAAw+vsRLpEFWMdOCWBWq8kK%2FTCDCt0gFGvn9Cg6%2FKbWn+XSzUqLX4Zz0iuB8L3ScYO%2FAgAAAAAMAAQAAAAAAAAAAAAAAAAAAF7mKMSy%2F94sO%2FFLfzGVHSn%2F%2F%2F%2F%2FAAAAAQAAAAAAAAAAAAAAAQAAAAzz9kZWctWz%2F71SyRGT4sGWGzarasOwMDr7nLNq; _gcl_au=1.1.649793574.1694149149; DoubleClickSession=true; __pdst=6d088fc0ceeb4e59904dc1c951148a06; _fbp=fb.1.1694149153245.222697292; tfpsi=98b0a3ea-7663-49de-91de-8b8164f9369a; _pin_unauth=dWlkPU9ESTFaREE1TTJJdE1USm1aaTAwTURVMkxUZzVOV1V0TmpnMU5EQTJNV0UyWVdVMw; _clck=icghu2|2|feu|0|1346; pxcts=78670fe7-4e05-11ee-bf32-9cc3979fd939; _pxvid=7866fc5b-4e05-11ee-bf32-54c53dc0eae8; _uetsid=72fe6a904e0411ee9d33b7e3d0ed2073; _uetvid=72ff9a204e0411eea067d3be926e6b3c; __gads=ID=7e997c1b120b140a:T=1694149128:RT=1694150971:S=ALNI_MaegjswS-k-9vySyoiNthOU5pUO6g; __gpi=UID=00000c9dd26b3fe2:T=1694149128:RT=1694150971:S=ALNI_MawcLhIWaYF5aoToTrRUTNZtMbXBw; _clsk=1t2uy3d|1694150976221|9|0|x.clarity.ms/collect; search=6|1696743218596%7Cregion%3Dtx%26rb%3DTX%26rect%3D36.500704%252C-93.508039%252C25.837164%252C-106.645646%26disp%3Dmap%26mdm%3Dauto%26listPriceActive%3D1%26fs%3D1%26fr%3D0%26mmm%3D1%26rs%3D0%26ah%3D0%09%0954%09%7B%22isList%22%3Atrue%2C%22isMap%22%3Atrue%7D%09%09%09%09%09; _pxff_cc=U2FtZVNpdGU9TGF4Ow==; _pxff_cfp=1; _pxff_bsco=1; _gat=1; AWSALB=TcNiQiRZufWg17fAKfRVsg+Xk8oCO+k39sJxXDgRwJ8OO3ytyMtZE5+R+mAelV5DmR2voJrDm3oANOKyHp73cEwfjndowgoJUq0l+9V3GAqdaiQOE0Eht8TRzF7U; AWSALBCORS=TcNiQiRZufWg17fAKfRVsg+Xk8oCO+k39sJxXDgRwJ8OO3ytyMtZE5+R+mAelV5DmR2voJrDm3oANOKyHp73cEwfjndowgoJUq0l+9V3GAqdaiQOE0Eht8TRzF7U; _px3=50b82e694f03a73c803a296c93ab3fbad1ae192e26efbbaec6c6228a434d228c:nTgM7Ar10l04Dx8BGdhkqHO1pNt256TJJX5M6oB8OCV8eZf/pHS5d+dDyHj2eB8wSIv2mSXC+q3HEtQoqQlUQA==:1000:EPjFN6ko9RoX7aTNNyGl3bGZqGpFPDTttsyoCoxV8Yw29Ou2SUqx0TZ4qyhpIwOGYO0+Hb8oImZH2J36esMlm+3KB1QqOHWEpWcFdjZp97VDjcIzLegfn/cgQJGLWFcaolLNe2pQdYSGaqcSdq1cIzg6Pyk0NRiWWf2OGbXlMPYUMfSWVHCnaQqQhaQuW+pHxNPM+O/Q5whrnZsLrJx25Q==',
            "Sec-Ch-Ua": "", 
            "Sec-Ch-Ua-Mobile": "?0",
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.5845.141 Safari/537.36",
            "Sec-Ch-Ua-Platform": "",
            "Accept": "*/*",
            "Sec-Fetch-Site": "same-origin",
            "Sec-Fetch-Mode": "cors",
            "Sec-Fetch-Dest": "empty",
            "Accept-Encoding": "gzip, deflate",
            "Accept-Language": "en-US,en;q=0.9"
            }

response = requests.get(LISTING_URL, headers=headers)

with open("listing.json","w") as ls:

    ls.write(response.text)

